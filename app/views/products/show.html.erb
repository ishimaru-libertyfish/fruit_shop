<!-- app/views/products/show.html.erb -->
 
<h1>商品詳細</h1>

<div>
  <% if @product.photo.attached? %>
    <%= image_tag @product.thumbnail %>
  <% end %>
  <p>商品名: <%= @product.name %></p>
  <p>説明: <%= @product.description %></p>
  <p>価格: <%= @product.price %>円</p>
</div>

<% if !user_signed_in? %>
# 未ログインユーザ --- IGNORE ---
    <%= form_with url: add_product_carts_path, local: true, data: { turbo: false } do |form| %>
      <%= form.hidden_field :product_id, value: @product.id %>
      <%= form.number_field :count, value: 1, min: 1 %>
      <%= form.submit 'カートに追加' %>
    <% end %>
<% elsif user_signed_in? && !current_user.admin_flg?  %>
# ログインユーザ（管理者でない） --- IGNORE ---
    <%= form_with scope: :cart_item, url: cart_items_path do |form| %>
      <%= form.hidden_field :product_id, value: @product.id %>
      <%= form.number_field :quantity, value: 1, min: 1 %>
      <%= form.submit "カートに追加" %>
    <% end %>
<% else %>
 # 管理者ユーザ --- IGNORE ---
    <%= link_to "編集", edit_product_path(@product) %>
    <br>
    <%= link_to '削除', destroy_product_path(@product),  data: { turbo_method: :delete, turbo_confirm: '本当に削除しますか？' } %>
<% end %>





